<!DOCTYPE html>
<html>

<head>
  <title>shortcuts</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      overflow-x: hidden;
    }

    a {
      color: #333;
    }

  </style>
  <script src="jquery.min.js"></script>
</head>

<body>
  <div class="items"></div>
  <div style="clear: both"></div>
  <script>
    var url = 'shortcuts';
    var data = [];

    $.get('shortcuts', function (resp) {
      data = Object.keys(resp.result || {}).map(x => ({key: x, value: resp.result[x]})).sort().concat([{key: '', value: ''}])
      render()
    })

    function render() {
      var disp = $('.items');
      disp.html('');
      for (var o of data) {
        disp[0].innerHTML += (`
        <div class="shortcut">
            <form onsubmit="return false;">
                <label>Key:
                    <input value="${o.key}" type="text" class="key" />
                </label>
                <label>Value:
                    <input value="${o.value}" type="text" class="value" />
                </label>
                <button onclick="update(this)">âˆš</button>
            </form>
        </div>`);
      }
    }

    function update(e) {
      var key = $(e).parent().find('.key').val(), value = $(e).parent().find('.value').val();
      $.post({
        url: 'shortcuts',
        data: JSON.stringify({
          key,
          value
        }),
        success: function () {
          alert('OK')
        },
        contentType: 'application/json'
      });
    }
  </script>
</body>

</html>